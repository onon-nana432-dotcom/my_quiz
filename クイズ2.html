<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>市民アンケート（伝承館・防災）</title>
    <style>
        :root { --blue: #007bff; --green: #28a745; --gray: #6c757d; --bg: #f4f7f9; }
        body { font-family: "Helvetica Neue", Arial, sans-serif; background: var(--bg); margin: 0; padding: 0; display: flex; justify-content: center; }
        .container { background: white; width: 100%; max-width: 700px; min-height: 100vh; padding: 40px 20px; box-sizing: border-box; position: relative; }
        .screen { display: none; }
        .active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        h2 { font-size: 1.4rem; color: #333; margin-bottom: 20px; border-left: 5px solid var(--blue); padding-left: 15px; }
        .desc { background: #eef2f7; padding: 15px; border-radius: 10px; font-size: 0.95rem; margin-bottom: 20px; color: #444; }
        
        /* 選択肢 */
        .options { display: flex; flex-direction: column; gap: 12px; margin: 25px 0; }
        .opt { display: flex; align-items: center; padding: 20px; border: 2px solid #eee; border-radius: 12px; cursor: pointer; font-size: 1.1rem; transition: 0.2s; }
        .opt:active { background: #f0f0f0; }
        .opt input { margin-right: 15px; transform: scale(1.5); }
        
        /* 自由回答・地図 */
        textarea { width: 100%; height: 120px; padding: 15px; border-radius: 10px; border: 2px solid #ddd; font-size: 1rem; box-sizing: border-box; }
        .map-box { width: 100%; height: 300px; background: #ddd; border-radius: 15px; position: relative; overflow: hidden; border: 2px solid #ccc; cursor: crosshair; }
        .dot { position: absolute; width: 20px; height: 20px; background: red; border-radius: 50%; border: 3px solid white; transform: translate(-50%, -50%); pointer-events: none; }

        /* ナビゲーション */
        .nav { display: flex; justify-content: space-between; margin-top: 40px; gap: 20px; }
        button { flex: 1; padding: 18px; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: bold; cursor: pointer; }
        .btn-next { background: var(--blue); color: white; }
        .btn-back { background: var(--gray); color: white; }
        .btn-start { background: var(--green); color: white; width: 100%; font-size: 1.3rem; }
    </style>
</head>
<body>

<div class="container">
    <div id="q0" class="screen active">
        <h1>市民アンケート</h1>
        <p>伝承館の検討および、避難に関する貴重なご意見をお聞かせください。</p>
        <button class="btn-start" onclick="move(1)">アンケートを始める</button>
    </div>

    <div id="q1" class="screen">
        <h2>① 年齢</h2>
        <div class="options">
            <label class="opt"><input type="radio" name="r1"> 10歳未満</label>
            <label class="opt"><input type="radio" name="r1"> 10代</label>
            <label class="opt"><input type="radio" name="r1"> 20代〜60代</label>
            <label class="opt"><input type="radio" name="r1"> 70代以上</label>
        </div>
        <div class="nav"><button class="btn-back" onclick="move(0)">戻る</button><button class="btn-next" onclick="move(2)">次へ</button></div>
    </div>

    <div id="q2" class="screen">
        <h2>② 職業（複数選択可）</h2>
        <div class="options">
            <label class="opt"><input type="checkbox"> 会社員・公務員</label>
            <label class="opt"><input type="checkbox"> 自営業・フリーランス</label>
            <label class="opt"><input type="checkbox"> 学生</label>
            <label class="opt"><input type="checkbox"> 専業主婦・主夫</label>
            <label class="opt"><input type="checkbox"> その他</label>
        </div>
        <div class="nav"><button class="btn-back" onclick="move(1)">戻る</button><button class="btn-next" onclick="move(3)">次へ</button></div>
    </div>

    <div id="q3" class="screen">
        <h2>③ 居住地</h2>
        <div class="options">
            <label class="opt"><input type="radio" name="r3"> 若宮</label>
            <label class="opt"><input type="radio" name="r3"> 田口</label>
            <label class="opt"><input type="radio" name="r3"> たいら</label>
            <label class="opt"><input type="radio" name="r3"> その他</label>
        </div>
        <div class="nav"><button class="btn-back" onclick="move(2)">戻る</button><button class="btn-next" onclick="move(4)">次へ</button></div>
    </div>

    <div id="q4" class="screen">
        <h2>④ 被災経験の有無</h2>
        <div class="options">
            <label class="opt"><input type="radio" name="r4"> ある</label>
            <label class="opt"><input type="radio" name="r4"> ない</label>
        </div>
        <div class="nav"><button class="btn-back" onclick="move(3)">戻る</button><button class="btn-next" onclick="move(5)">次へ</button></div>
    </div>

    <div id="q5" class="screen">
        <h2>⑤ 同居者の人数</h2>
        <div class="options">
            <label class="opt"><input type="radio" name="r5"> 1人（単身）</label>
            <label class="opt"><input type="radio" name="r5"> 2人</label>
            <label class="opt"><input type="radio" name="r5"> 3人</label>
            <label class="opt"><input type="radio" name="r5"> 4人以上</label>
        </div>
        <div class="nav"><button class="btn-back" onclick="move(4)">戻る</button><button class="btn-next" onclick="move(6)">次へ</button></div>
    </div>

    <div id="q6" class="screen">
        <div class="desc">【提案】市民文化会館に水害伝承のスペースを作りたいと考えています。</div>
        <h2>⑥ 伝承館に行きたいですか？</h2>
        <div class="options">
            <label class="opt"><input type="radio" name="r6"> はい</label>
            <label class="opt"><input type="radio" name="r6"> いいえ</label>
        </div>
        <div class="nav"><button class="btn-back" onclick="move(5)">戻る</button><button class="btn-next" onclick="move(7)">次へ</button></div>
    </div>

    <div id="q7" class="screen">
        <h2>⑦ 何があれば伝承館に行きたいですか？</h2>
        <div class="options">
            <label class="opt"><input type="checkbox"> 当時の写真・映像パネル</label>
            <label class="opt"><input type="checkbox"> 被災者の体験談コーナー</label>
            <label class="opt"><input type="checkbox"> 防災ワークショップ</label>
            <label class="opt"><input type="checkbox"> カフェや休憩スペース</label>
        </div>
        <div class="nav"><button class="btn-back" onclick="move(6)">戻る</button><button class="btn-next" onclick="move(8)">次へ</button></div>
    </div>

    <div id="q8" class="screen">
        <h2>⑧ どこに欲しいですか？</h2>
        <p>地図上の希望の場所をタップしてください。</p>
        <div class="map-box" onclick="setMap(event)">
            <p style="text-align:center; margin-top:120px; color:#888;">（地図画像をここに配置）</p>
            <div id="map-dot"></div>
        </div>
        <div class="nav"><button class="btn-back" onclick="move(7)">戻る</button><button class="btn-next" onclick="move(9)">次へ</button></div>
    </div>

    <div id="q9" class="screen">
        <h2>⑨ なぜ現在の場所に住むことにしたのですか？</h2>
        <textarea placeholder="自由にご記入ください"></textarea>
        <div class="nav"><button class="btn-back" onclick="move(8)">戻る</button><button class="btn-next" onclick="move(10)">次へ</button></div>
    </div>

    <div id="q10" class="screen">
        <h2>⑩ 何があれば住みたいと思いますか？</h2>
        <div class="options" id="opt10">
            <label class="opt"><input type="checkbox"> 地価が安い</label>
            <label class="opt"><input type="checkbox"> 利便性（立地条件）</label>
            <div id="hint10" style="display:none; flex-direction:column; gap:12px;">
                <label class="opt"><input type="checkbox"> 公共交通（バス等）の充実</label>
                <label class="opt"><input type="checkbox"> 駐車場が広い</label>
                <label class="opt"><input type="checkbox"> ピロティ建築等の災害対応</label>
            </div>
        </div>
        <button id="hintBtn10" style="background:#eee; color:#333;" onclick="showHint(10)">候補を表示する</button>
        <div class="nav"><button class="btn-back" onclick="move(9)">戻る</button><button class="btn-next" onclick="move(11)">次へ</button></div>
    </div>

    <div id="q11" class="screen">
        <h2>⑪ 免許返納について（高齢者の方等）</h2>
        <p>返納予定はありますか？また、どうすれば返納しやすくなりますか？</p>
        <textarea placeholder="返納の条件や、代わりの交通手段への希望など"></textarea>
        <div class="nav"><button class="btn-back" onclick="move(10)">戻る</button><button class="btn-next" onclick="move(12)">次へ</button></div>
    </div>

    <div id="q12" class="screen">
        <h2>⑫ 避難指示の際、どの手段で避難しますか？</h2>
        <div class="options">
            <label class="opt"><input type="radio" name="r12"> 自動車</label>
            <label class="opt"><input type="radio" name="r12"> 徒歩</label>
            <label class="opt"><input type="radio" name="r12"> 自転車・バイク</label>
            <label class="opt"><input type="radio" name="r12"> その他</label>
        </div>
        <div class="nav"><button class="btn-back" onclick="move(11)">戻る</button><button class="btn-next" onclick="move(13)">次へ</button></div>
    </div>

    <div id="q13" class="screen">
        <h2>⑬ 車を避難させるならどこですか？</h2>
        <textarea placeholder="具体的な場所の名称やエリア"></textarea>
        <div class="nav"><button class="btn-back" onclick="move(12)">戻る</button><button class="btn-next" onclick="move(14)">次へ</button></div>
    </div>

    <div id="q14" class="screen">
        <h2>⑭ 避難の際に欲しい支援は？</h2>
        <div class="options">
            <label class="opt"><input type="checkbox"> バスによる輸送</label>
            <label class="opt"><input type="checkbox"> 避難所への情報提供</label>
            <label class="opt"><input type="checkbox"> 駐車場の確保</label>
            <label class="opt"><input type="checkbox"> 避難物資（水・食料）</label>
        </div>
        <div class="nav"><button class="btn-back" onclick="move(13)">戻る</button><button class="btn-next" onclick="move(15)">次へ</button></div>
    </div>

    <div id="q15" class="screen">
        <h2>⑮ 避難の際に欲しい情報は？</h2>
        <div class="options">
            <label class="opt"><input type="checkbox"> 避難所の場所・空き状況</label>
            <label class="opt"><input type="checkbox"> 避難所の設備（トイレ・寝具等）</label>
            <label class="opt"><input type="checkbox"> 洪水の危険度・浸水予測</label>
            <label class="opt"><input type="checkbox"> 道路の通行止め情報</label>
        </div>
        <div class="nav"><button class="btn-back" onclick="move(14)">戻る</button><button class="btn-next" onclick="move(16)">次へ</button></div>
    </div>

    <div id="q16" class="screen">
        <h2>⑯ バスの利用について</h2>
        <p>普段バスを使っていますか？使う方は目的も教えてください。</p>
        <div class="options">
            <label class="opt"><input type="radio" name="r16"> よく使う</label>
            <label class="opt"><input type="radio" name="r16"> たまに使う</label>
            <label class="opt"><input type="radio" name="r16"> ほとんど使わない</label>
        </div>
        <textarea placeholder="利用目的（通院、買い物、通勤など）"></textarea>
        <div class="nav"><button class="btn-back" onclick="move(15)">戻る</button><button class="btn-next" onclick="move(17)">次へ</button></div>
    </div>

    <div id="q17" class="screen">
        <h2>⑰ 災害時のバス利用について</h2>
        <p>発災前にバスが巡回に回ってきた場合、乗って避難しますか？</p>
        <div class="options">
            <label class="opt"><input type="radio" name="r17"> すぐに乗って避難する</label>
            <label class="opt"><input type="radio" name="r17"> 乗らなくても、自力で避難する</label>
            <label class="opt"><input type="radio" name="r17"> 様子を見る（すぐには避難しない）</label>
        </div>
        <div class="nav"><button class="btn-back" onclick="move(16)">戻る</button><button class="btn-next" onclick="finish()">回答を送信する</button></div>
    </div>

    <div id="qEnd" class="screen">
        <div style="text-align:center; padding: 50px 0;">
            <h1 style="color:var(--green);">✔️</h1>
            <h2>アンケートへのご協力ありがとうございました</h2>
            <p>お預かりした意見は今後の検討に活用させていただきます。</p>
            <button class="btn-start" onclick="location.reload()" style="margin-top:30px;">最初に戻る</button>
        </div>
    </div>

</div>

<script>
    function move(n) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        const target = (n === 'end') ? document.getElementById('qEnd') : document.getElementById('q' + n);
        target.classList.add('active');
        window.scrollTo(0, 0);
    }

    function showHint(n) {
        document.getElementById('hint' + n).style.display = 'flex';
        document.getElementById('hintBtn' + n).style.display = 'none';
    }

    function setMap(e) {
        const dot = document.getElementById('map-dot');
        const rect = e.currentTarget.getBoundingClientRect();
        dot.className = 'dot';
        dot.style.left = (e.clientX - rect.left) + 'px';
        dot.style.top = (e.clientY - rect.top) + 'px';
    }

    function finish() {
        move('end');
    }
</script>

</body>
</html>